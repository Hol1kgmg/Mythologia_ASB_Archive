# ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ 2: ã‚«ãƒ¼ãƒ‰ãƒã‚¹ã‚¿ãƒ¼ç®¡ç†æ©Ÿèƒ½

## ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ğŸ”´ æœªé–‹å§‹

## æ¦‚è¦
ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…å°‚ç”¨ã®ã‚«ãƒ¼ãƒ‰CRUDæ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚ã‚«ãƒ¼ãƒ‰ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ç™»éŒ²ã€æ›´æ–°ã€å‰Šé™¤ã€æ¤œç´¢æ©Ÿèƒ½ã‚’æä¾›ã—ã€ã‚²ãƒ¼ãƒ ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

## æœŸé–“
- **é–‹å§‹äºˆå®š**: 2025å¹´6æœˆç¬¬3é€±
- **çµ‚äº†äºˆå®š**: 2025å¹´7æœˆç¬¬1é€±
- **æœŸé–“**: 3é€±é–“

## å‰ææ¡ä»¶
- ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³1ï¼ˆç®¡ç†è€…èªè¨¼åŸºç›¤ï¼‰ã®å®Œäº†
- ç®¡ç†è€…ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¦èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã§ãã‚‹çŠ¶æ…‹

## ç›®æ¨™
- ã‚«ãƒ¼ãƒ‰ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®å®Œå…¨ãªCRUDæ©Ÿèƒ½
- åŠ¹ç‡çš„ãªä¸€æ‹¬ç™»éŒ²ãƒ»æ›´æ–°æ©Ÿèƒ½
- ã‚«ãƒ¼ãƒ‰ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- é«˜åº¦ãªæ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
- ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ä¿è¨¼

## ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ

### Week 1: ã‚«ãƒ¼ãƒ‰CRUDåŸºæœ¬å®Ÿè£…

#### Day 1-2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æº–å‚™ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«
- [ ] ã‚«ãƒ¼ãƒ‰é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆï¼ˆcards, tribes, card_setsï¼‰
- [ ] åˆæœŸãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥ï¼ˆtribes, card_setsï¼‰
- [ ] ã‚«ãƒ¼ãƒ‰ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã®å®Ÿè£…
- [ ] Zodã‚¹ã‚­ãƒ¼ãƒå®šç¾©
  ```typescript
  const CardSchema = z.object({
    id: z.string().uuid(),
    cardNumber: z.string().regex(/^\d{5}$/),
    name: z.string().min(1).max(100),
    leaderId: z.number().min(1).max(5).nullable(),
    tribeId: z.number().positive().nullable(),
    rarityId: z.number().min(1).max(4),
    cardTypeId: z.number().min(1).max(3),
    cost: z.number().min(0).max(10),
    power: z.number().min(0).max(9999),
    effects: z.array(CardEffectSchema),
    flavorText: z.string().optional(),
    imageUrl: z.string().url(),
    artist: z.string().optional(),
    cardSetId: z.string().uuid()
  });
  ```

#### Day 3-4: åŸºæœ¬CRUD APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- [ ] POST `/api/admin/cards` - ã‚«ãƒ¼ãƒ‰ä½œæˆ
- [ ] GET `/api/admin/cards/:id` - ã‚«ãƒ¼ãƒ‰è©³ç´°å–å¾—
- [ ] PUT `/api/admin/cards/:id` - ã‚«ãƒ¼ãƒ‰æ›´æ–°
- [ ] DELETE `/api/admin/cards/:id` - ã‚«ãƒ¼ãƒ‰å‰Šé™¤ï¼ˆè«–ç†å‰Šé™¤ï¼‰
- [ ] GET `/api/admin/cards` - ã‚«ãƒ¼ãƒ‰ä¸€è¦§ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰

#### Day 5: ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] ã‚«ãƒ¼ãƒ‰ç•ªå·ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯
- [ ] ç¨®æ—ã¨ãƒªãƒ¼ãƒ€ãƒ¼ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
- [ ] åŠ¹æœãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ æ¤œè¨¼
- [ ] è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å®Ÿè£…
- [ ] ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å‡¦ç†ã®å®Ÿè£…

### Week 2: é«˜åº¦ãªæ©Ÿèƒ½å®Ÿè£…

#### Day 6-7: æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
- [ ] GET `/api/admin/cards/search` - é«˜åº¦ãªæ¤œç´¢ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  - åå‰æ¤œç´¢ï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰
  - ãƒªãƒ¼ãƒ€ãƒ¼åˆ¥ãƒ•ã‚£ãƒ«ã‚¿
  - ç¨®æ—åˆ¥ãƒ•ã‚£ãƒ«ã‚¿
  - ãƒ¬ã‚¢ãƒªãƒ†ã‚£åˆ¥ãƒ•ã‚£ãƒ«ã‚¿
  - ã‚³ã‚¹ãƒˆç¯„å›²ãƒ•ã‚£ãƒ«ã‚¿
  - ãƒ‘ãƒ¯ãƒ¼ç¯„å›²ãƒ•ã‚£ãƒ«ã‚¿
  - ã‚«ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—åˆ¥ãƒ•ã‚£ãƒ«ã‚¿
  - åŠ¹æœã‚¿ã‚¤ãƒ—æ¤œç´¢
- [ ] ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆåå‰ã€ã‚³ã‚¹ãƒˆã€ãƒ‘ãƒ¯ãƒ¼ã€æ›´æ–°æ—¥æ™‚ï¼‰
- [ ] æ¤œç´¢çµæœã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆCSVï¼‰

#### Day 8-9: ä¸€æ‹¬æ“ä½œæ©Ÿèƒ½
- [ ] POST `/api/admin/cards/bulk` - ä¸€æ‹¬ç™»éŒ²
- [ ] PUT `/api/admin/cards/bulk` - ä¸€æ‹¬æ›´æ–°
- [ ] POST `/api/admin/cards/import` - CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- [ ] ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ãƒãƒ¼ãƒˆ
- [ ] ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³æ©Ÿèƒ½ï¼ˆå®Ÿéš›ã«ç™»éŒ²ã›ãšã«æ¤œè¨¼ã®ã¿ï¼‰

#### Day 10: ã‚«ãƒ¼ãƒ‰ç”»åƒç®¡ç†
- [ ] POST `/api/admin/cards/:id/image` - ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- [ ] ç”»åƒãƒªã‚µã‚¤ã‚ºãƒ»æœ€é©åŒ–å‡¦ç†
- [ ] ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­å®šï¼ˆS3/R2ï¼‰
- [ ] ç”»åƒURLã®ç”Ÿæˆã¨ç®¡ç†
- [ ] å¤ã„ç”»åƒã®è‡ªå‹•å‰Šé™¤

### Week 3: è£œåŠ©æ©Ÿèƒ½ã¨ãƒ†ã‚¹ãƒˆ

#### Day 11-12: ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ç®¡ç†API
- [ ] GET `/api/admin/tribes` - ç¨®æ—ä¸€è¦§
- [ ] POST `/api/admin/tribes` - ç¨®æ—è¿½åŠ 
- [ ] PUT `/api/admin/tribes/:id` - ç¨®æ—æ›´æ–°
- [ ] GET `/api/admin/card-sets` - ã‚«ãƒ¼ãƒ‰ã‚»ãƒƒãƒˆä¸€è¦§
- [ ] POST `/api/admin/card-sets` - ã‚«ãƒ¼ãƒ‰ã‚»ãƒƒãƒˆè¿½åŠ 
- [ ] ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½

#### Day 13-14: ç›£æŸ»ã¨ãƒ­ã‚°æ©Ÿèƒ½
- [ ] ã‚«ãƒ¼ãƒ‰å¤‰æ›´å±¥æ­´ã®è¨˜éŒ²
- [ ] ç®¡ç†è€…ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å±¥æ­´
- [ ] GET `/api/admin/cards/:id/history` - å¤‰æ›´å±¥æ­´å–å¾—
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ©Ÿèƒ½
- [ ] å‰Šé™¤æ¸ˆã¿ã‚«ãƒ¼ãƒ‰ã®å¾©å…ƒæ©Ÿèƒ½

#### Day 15: çµ±åˆãƒ†ã‚¹ãƒˆã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [ ] ã‚«ãƒ¼ãƒ‰CRUDæ“ä½œã®çµ±åˆãƒ†ã‚¹ãƒˆ
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆå¤§é‡ãƒ‡ãƒ¼ã‚¿ï¼‰
- [ ] APIä»•æ§˜æ›¸ã®å®Œæˆ
- [ ] ç®¡ç†è€…å‘ã‘æ“ä½œã‚¬ã‚¤ãƒ‰ä½œæˆ
- [ ] ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

## æˆæœç‰©

### API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§
```
# ã‚«ãƒ¼ãƒ‰CRUD
POST   /api/admin/cards              # ã‚«ãƒ¼ãƒ‰ä½œæˆ
GET    /api/admin/cards              # ã‚«ãƒ¼ãƒ‰ä¸€è¦§
GET    /api/admin/cards/:id          # ã‚«ãƒ¼ãƒ‰è©³ç´°
PUT    /api/admin/cards/:id          # ã‚«ãƒ¼ãƒ‰æ›´æ–°
DELETE /api/admin/cards/:id          # ã‚«ãƒ¼ãƒ‰å‰Šé™¤

# æ¤œç´¢ãƒ»ä¸€æ‹¬æ“ä½œ
GET    /api/admin/cards/search       # é«˜åº¦ãªæ¤œç´¢
POST   /api/admin/cards/bulk         # ä¸€æ‹¬ç™»éŒ²
PUT    /api/admin/cards/bulk         # ä¸€æ‹¬æ›´æ–°
POST   /api/admin/cards/import       # CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆ
GET    /api/admin/cards/export       # ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

# ç”»åƒç®¡ç†
POST   /api/admin/cards/:id/image    # ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
DELETE /api/admin/cards/:id/image    # ç”»åƒå‰Šé™¤

# ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿
GET    /api/admin/tribes             # ç¨®æ—ä¸€è¦§
POST   /api/admin/tribes             # ç¨®æ—è¿½åŠ 
PUT    /api/admin/tribes/:id         # ç¨®æ—æ›´æ–°
GET    /api/admin/card-sets          # ã‚»ãƒƒãƒˆä¸€è¦§
POST   /api/admin/card-sets          # ã‚»ãƒƒãƒˆè¿½åŠ 

# ç›£æŸ»
GET    /api/admin/cards/:id/history  # å¤‰æ›´å±¥æ­´
GET    /api/admin/audit-logs         # ç›£æŸ»ãƒ­ã‚°
```

### ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
```typescript
// ã‚«ãƒ¼ãƒ‰ä½œæˆ/æ›´æ–°ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
interface CardRequest {
  cardNumber: string;
  name: string;
  leaderId?: number;
  tribeId?: number;
  rarityId: number;
  cardTypeId: number;
  cost: number;
  power: number;
  effects: CardEffect[];
  flavorText?: string;
  imageUrl?: string;
  artist?: string;
  cardSetId: string;
}

// æ¤œç´¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
interface CardSearchParams {
  query?: string;
  leaderId?: number;
  tribeId?: number;
  rarityId?: number;
  cardTypeId?: number;
  minCost?: number;
  maxCost?: number;
  minPower?: number;
  maxPower?: number;
  effectType?: string;
  cardSetId?: string;
  sortBy?: 'name' | 'cost' | 'power' | 'updatedAt';
  sortOrder?: 'asc' | 'desc';
  page?: number;
  limit?: number;
}
```

## æˆåŠŸåŸºæº–

### æ©Ÿèƒ½è¦ä»¶
- âœ… ã™ã¹ã¦ã®CRUDæ“ä½œãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- âœ… 10,000ä»¶ã®ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’å•é¡Œãªãç®¡ç†ã§ãã‚‹
- âœ… æ¤œç´¢ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ < 500ms
- âœ… ä¸€æ‹¬ç™»éŒ²ã§100ä»¶ã‚’5ç§’ä»¥å†…ã«å‡¦ç†
- âœ… ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒæ­£å¸¸ã«æ©Ÿèƒ½ã™ã‚‹

### ãƒ‡ãƒ¼ã‚¿å“è³ª
- ã‚«ãƒ¼ãƒ‰ç•ªå·ã®ä¸€æ„æ€§ãŒä¿è¨¼ã•ã‚Œã‚‹
- ã™ã¹ã¦ã®å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ãŒé©åˆ‡ã«æ©Ÿèƒ½ã™ã‚‹
- å‰Šé™¤æ“ä½œãŒè«–ç†å‰Šé™¤ã¨ã—ã¦å®Ÿè£…ã•ã‚Œã‚‹
- å¤‰æ›´å±¥æ­´ãŒå®Œå…¨ã«è¨˜éŒ²ã•ã‚Œã‚‹

## æŠ€è¡“è©³ç´°

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- é©åˆ‡ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®š
- ã‚¯ã‚¨ãƒªæœ€é©åŒ–
- ãƒãƒƒãƒå‡¦ç†ã®æ´»ç”¨
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ï¼ˆå¤‰æ›´ã®å°‘ãªã„ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®
- ç®¡ç†è€…èªè¨¼ã®å¾¹åº•
- SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã®è¨˜éŒ²

## ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

### ãƒªã‚¹ã‚¯1: å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- **å½±éŸ¿**: ã‚·ã‚¹ãƒ†ãƒ ã®å¿œç­”é€Ÿåº¦ä½ä¸‹
- **å¯¾ç­–**: ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ´»ç”¨

### ãƒªã‚¹ã‚¯2: ãƒ‡ãƒ¼ã‚¿ä¸æ•´åˆ
- **å½±éŸ¿**: ã‚²ãƒ¼ãƒ ãƒãƒ©ãƒ³ã‚¹ã®å´©å£Š
- **å¯¾ç­–**: ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å‡¦ç†ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–ã€å®šæœŸçš„ãªæ•´åˆæ€§ãƒã‚§ãƒƒã‚¯

### ãƒªã‚¹ã‚¯3: ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ã‚³ã‚¹ãƒˆ
- **å½±éŸ¿**: é‹ç”¨ã‚³ã‚¹ãƒˆå¢—å¤§
- **å¯¾ç­–**: ç”»åƒæœ€é©åŒ–ã€ä¸è¦ç”»åƒã®è‡ªå‹•å‰Šé™¤ã€CDNæ´»ç”¨

## æ¬¡ã®ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³
[ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ 3: ãƒ‡ãƒƒã‚­ãƒ“ãƒ«ãƒ€ãƒ¼UI](milestone-3-deck-builder.md) - ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒ‡ãƒƒã‚­ä½œæˆç”»é¢ã®å®Ÿè£…