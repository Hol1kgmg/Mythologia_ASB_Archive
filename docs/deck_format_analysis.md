# デッキコードフォーマット仕様書

## 概要

カードゲームのデッキ構成を表現するJSONベースのコード体系の解析結果です。リーダー選択、カード構成、完成状態を効率的に記録できる仕組みになっています。

## データ構造

```json
{
  "g": 4,
  "cd": "カードコード文字列",
  "n": "デッキ名",
  "m": 80009
}
```

### フィールド詳細

| フィールド | 意味 | 説明 |
|------------|------|------|
| `g` | General/Leader ID | 選択されたリーダーのID |
| `cd` | Card Data | カードコード文字列（カンマ区切り） |
| `n` | Name | デッキ名 |
| `m` | Master ID | 完成デッキのキーカードID（0=編集中、正の整数=キーカードコード） |

## カードコード構造

### 基本構造（8桁）

```
[タイプ][シリーズ][カード番号][枚数]
   1桁    3桁      2桁     2桁
```

### 各部分の詳細

#### 1桁目: カードタイプ
- `1`: 初期発見タイプ（ドラゴン系カード）
- `4`: 新発見タイプ（汎用カード）
- `8`: 新発見タイプ（特殊カード）
- `9`: 初期発見タイプ（レアカード）

#### 2-4桁目: シリーズ番号
- `000`: 基本シリーズ
- `001`: シリーズ1
- `002`: シリーズ2
- `003`: シリーズ3

#### 5-6桁目: カード番号
個別カードを識別する番号（00-99）

#### 7-8桁目: 枚数
- `01`: 1枚
- `02`: 2枚
- `03`: 3枚

## リーダー別デッキ構成傾向

### リーダー1（ドラゴン）
- **主要カードタイプ**: タイプ1（28枚/33枚）
- **補助カードタイプ**: タイプ8（5枚/33枚）
- **特徴**: ドラゴン系カード中心の構成

### リーダー4（汎用）
- **デフォルトデッキ**: タイプ8のみ（30枚/30枚）
- **ぬんぬんデッキ**: タイプ4中心（29枚/37枚）+ タイプ8（7枚）+ タイプ9（1枚）
- **特徴**: 多様なカードタイプに対応

## マスターIDの法則

完成デッキのマスターIDは、そのデッキの「キーカード」コードと密接に関連しています。

| デッキ名 | マスターID | 対応するカードコード | 関係性 |
|----------|------------|---------------------|--------|
| デフォルトデッキ | 80009 | 80009003 | 完全一致（枚数除く） |
| ぬんぬん | 40003 | 40003003 | 完全一致（枚数除く） |
| ドラゴン | 10031 | 10031002 | 完全一致（枚数除く） |

**法則**: マスターID = キーカードの最初6桁（タイプ+シリーズ+番号）

## 複数カードの表現

複数種類のカードを含む場合、カンマ（`,`）で区切って連結します。

**例:**
```
"90003001,40005003,40006003"
→ タイプ9カード 1枚 + タイプ4カード 3枚 + タイプ4カード 3枚
```

## 実例データ

### 完成デッキ例

#### 30枚デッキ（デフォルトデッキ）
```json
{
  "g": 4,
  "cd": "80024003,80009003,80013003,80017003,80025003,80008003,80021003,80026003,80028003,80027003",
  "n": "デフォルトデッキ",
  "m": 80009
}
```

#### 37枚デッキ（ぬんぬん）
```json
{
  "g": 4,
  "cd": "90003001,40005003,40006003,40007003,40025003,80011003,80012003,80015001,40023003,40002003,40019002,40003003,40001003,40008003",
  "n": "ぬんぬん",
  "m": 40003
}
```

#### 33枚デッキ（ドラゴン）
```json
{
  "g": 1,
  "cd": "10015002,10028003,10025003,80012002,80013003,10020003,10013003,10014003,10023002,10004003,10031002,10029002,10016002",
  "n": "ドラゴン",
  "m": 10031
}
```

### 編集中デッキ例
```json
// カードA 1枚
{"g":1,"cd":"90003001","n":"デッキ4","m":0}

// 複数カード組み合わせ
{"g":1,"cd":"90003001,10012003","n":"デッキ4","m":0}
```

## カードタイプ別特徴

### タイプ1: ドラゴン系カード
- **使用リーダー**: 主にリーダー1
- **シリーズ**: 000, 001, 002, 003
- **役割**: デッキの主力カード

### タイプ4: 汎用カード
- **使用リーダー**: 主にリーダー4
- **シリーズ**: 000, 001, 002
- **役割**: バランス型の汎用カード

### タイプ8: 特殊カード
- **使用リーダー**: リーダー1, 4両方
- **シリーズ**: 000, 001, 002
- **役割**: 補助・特殊効果カード

### タイプ9: レアカード
- **使用リーダー**: 様々
- **シリーズ**: 000
- **役割**: 高価値・特別効果カード

## デッキ構築の特徴

1. **柔軟なデッキサイズ**: 30-37枚程度で可変
2. **多様な枚数設定**: 1-3枚の範囲で自由設定
3. **リーダー依存性**: リーダーによって使用カードタイプに傾向
4. **キーカードシステム**: マスターIDでデッキの核となるカードを識別

## 技術仕様

### 拡張性
- 各フィールドが固定桁数で将来の拡張に対応
- カードタイプは1桁で最大10種類まで対応可能
- シリーズ番号は3桁で1000シリーズまで対応
- カード番号は2桁で各シリーズ100枚まで対応

### 効率性
- 1つのコードで種類と枚数を同時表現
- カンマ区切りで任意の組み合わせに対応
- JSONフォーマットで可読性とパース性を両立

## 今後の調査項目

1. 他のリーダーID（2, 3, 5以上）の存在確認
2. タイプ0, 2, 3, 5-7の存在確認
3. 4枚以上のカード枚数の可能性
4. シリーズ004以上の存在確認
5. マスターIDの生成ルールの詳細解明