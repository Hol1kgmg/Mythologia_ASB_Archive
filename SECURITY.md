# Security Policy

## セキュリティポリシー

このドキュメントは、神託のメソロギア非公式Webアプリケーションのセキュリティに関する方針を定めます。

## 対応バージョン

| バージョン | サポート状況 |
| ------- | ---------- |
| 1.0.x   | :white_check_mark: |
| < 1.0   | :x: |

## 脆弱性の報告

このプロジェクトはプライベートリポジトリとして管理されています。セキュリティの脆弱性を発見した場合は、以下の手順で報告してください：

1. **公開しない**: 脆弱性の詳細を公開の場で議論しないでください
2. **プライベート連絡**: リポジトリ管理者に直接連絡してください
3. **詳細情報の提供**:
   - 脆弱性の種類
   - 影響を受けるコンポーネント
   - 再現手順
   - 潜在的な影響範囲
   - 可能であれば、修正案

## セキュリティ対策

### 1. 認証・認可
- JWT トークンベースの認証
- bcrypt によるパスワードハッシュ化（ラウンド数12以上）
- ロールベースアクセス制御（RBAC）
- セッションタイムアウトの実装

### 2. 入力検証
- Zod によるスキーマバリデーション
- SQLインジェクション対策（プリペアドステートメント使用）
- XSS対策（入力のサニタイゼーション）
- CSRF対策（トークン検証）

### 3. データ保護
- HTTPS通信の強制
- 環境変数による秘密情報管理
- データベース接続の暗号化
- センシティブデータのログ出力禁止

### 4. 依存関係管理
```bash
# 定期的な脆弱性チェック
npm audit

# 脆弱性の自動修正
npm audit fix

# 依存関係の更新
npm update
```

### 5. エラーハンドリング
- 本番環境でのスタックトレース非表示
- 一般的なエラーメッセージの使用
- 詳細なエラーはログに記録（ユーザーには非表示）

## セキュリティチェックリスト

### 開発時
- [ ] 環境変数が適切に管理されている
- [ ] SQLクエリがパラメータ化されている
- [ ] ユーザー入力が適切にバリデートされている
- [ ] 認証・認可が正しく実装されている
- [ ] エラーメッセージに機密情報が含まれていない

### デプロイ前
- [ ] npm audit で脆弱性がない
- [ ] 本番用の環境変数が設定されている
- [ ] HTTPSが有効になっている
- [ ] Rate Limitingが設定されている
- [ ] ログレベルが適切に設定されている

### 定期メンテナンス
- [ ] 月次での依存関係更新
- [ ] 四半期ごとのセキュリティ監査
- [ ] アクセスログの定期確認
- [ ] 不要なユーザーアカウントの削除

## インシデント対応

### 1. 検知
- アクセスログの監視
- エラーログの監視
- パフォーマンス異常の検知

### 2. 評価
- 影響範囲の特定
- 重要度の判定
- 対応優先度の決定

### 3. 対応
- 即座の脅威の封じ込め
- 影響を受けたシステムの隔離
- 修正パッチの開発・適用

### 4. 復旧
- システムの正常性確認
- サービスの段階的復旧
- 監視の強化

### 5. 事後対応
- インシデントレポートの作成
- 再発防止策の検討
- セキュリティポリシーの見直し

## 連絡先

セキュリティに関する問い合わせは、リポジトリ管理者まで直接ご連絡ください。

---

最終更新日: 2025-06-XX